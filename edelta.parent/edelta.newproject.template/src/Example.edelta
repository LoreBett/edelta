// IMPORTANT: ecores must be in a source directory
// otherwise you can't refer to them

package com.example

metamodel "myecore"
metamodel "ecore"

/*
 * Reusable function to create a new EClass with the
 * specified name, setting MyEClass as its superclass
 * @param name
 */
def createClass(String name) {
	newEClass(name) => [
		ESuperTypes += (eclass MyEClass)
	]
}

// refer to EClasses with "eclass"
val p = (eclass MyEClass).EPackage
// create new EClasses manually...
p.EClassifiers += createClass("NewClass") => [
	EStructuralFeatures += newEAttribute("myStringAttribute") => [
		// refer to EDataTypes with "edatatype"
		EType = edatatype EString
	]
	EStructuralFeatures += newEReference("myReference") => [
		EType = (eclass MyEClass)
		upperBound = -1;
		containment = true;
		lowerBound = 0
	]
]

// ... or using Edelta DSL specific syntax
createEClass MyNewClass in myecore

createEClass MyDerivedNewClass in myecore {
	ESuperTypes += eclass MyNewClass
	ESuperTypes += eclass MyOtherNewClass
	createEAttribute myNewAttribute {
		EType = edatatype EInt
		upperBound = -1;
	}
}

createEClass MyOtherNewClass in myecore

